<!DOCTYPE html>
<html>
<head>
<style>
.fontX{
    text-align: left;
    color: white ;
    font-size : 82px;
    font-family: Arial
}
    
.fontWhite
{
    color: white ;
    font-family: Arial;
    font-size : 50px;
    margin-top : 0px;
    margin-bottom : 0px;
}
    
.sizeButton
{
    font-family: Arial;
    font-size : 45px;
    border : 0;
    background-color : #333333;
    border-radius: 10px;
}
.emphasizeRed
{
    font-family: Arial;
    font-size : 70px;
    color : red;
}

.emphasizeYellow
{
    font-family : Arial;
    font-size : 70px;
    color : yellow;
    
}
</style>
</head>
<body bgcolor='#000000'>

<p class="fontX">Avg. speed calculator</p>


<button class = "sizeButton" onclick="distanceFunction()">Reset distance</button>
<br><br><br><br><br>
<p class = "fontWhite">Avg. speed required : <span class = "emphasizeRed", id="demo"> 0.00</span> kmph</p> \

<br><br>
<p id=m12 class = "fontWhite">Maintain 12 kmph for <span class = "emphasizeYellow" id="mText"></span> mins</p>
<p id=m12 class = "fontWhite">to make it come down to 5 kmph<span id="mText"></span></p>
<script>
    
    
let distance = 11.7;
let current_distance = 0.0

let latitude = 13.112278;
let longitude = 77.595146
let time = new Date();

const url = `https://api.sunrisesunset.io/json?lat=${latitude}&lng=${longitude}`
let fetchedObj=fetch(url)
  .then(response => response.json())
  .then(data => {
    console.log(data)
    time.setHours(parseInt(data.results.sunset[0])+12, parseInt(data.results.sunset[2])*10+parseInt(data.results.sunset[3]), 0, 0);
    
  })
  .catch(error => console.error('Error:', error))


    
let timeDiff = new Date();

setInterval(calculateFunction, 1000);
 
function distanceFunction() {
  current_distance = prompt("Please enter the distance covered");
  
  let currentTime = new Date();
  let avg_speed_req = 0.0;
  
  timeDiff = (time - currentTime)/(1000 * 3600);
  avg_speed_req = (11.7 - current_distance) / ( timeDiff);
  avg_speed_req = avg_speed_req.toFixed(2);
    
    document.getElementById("demo").innerHTML = avg_speed_req;
  
              
}
    
function calculateFunction() {
  let currentTime = new Date();
  let avg_speed_req = 0.0;
  
  timeDiff = (time - currentTime)/(1000 * 3600);
  avg_speed_req = (11.7 - current_distance) / ( timeDiff);
  
  let twelveSpeed = ((11.7 - current_distance) - 5 * (timeDiff)) * 8.571918;
    document.getElementById("mText").innerHTML = twelveSpeed.toFixed(2);
    document.getElementById("demo").innerHTML = avg_speed_req.toFixed(2);
  }

    
      

</script>

</body>
</html>
 
